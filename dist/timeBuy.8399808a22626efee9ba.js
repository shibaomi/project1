webpackJsonp([8],{1072:function(e,t,n){function a(e){return n(r(e))}function r(e){var t=o[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var o={"./index.js":221};a.keys=function(){return Object.keys(o)},a.resolve=r,e.exports=a,a.id=1072},221:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(1072),r=a.keys().filter(function(e){return"./index.js"!==e}),o=r.reduce(function(e,t){return e[t.match(/([^\/]+)\.js$/)[1]]=a(t),e},{});t.default=o,e.exports=t.default},473:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.history;return l.default.createElement(i.Router,{history:t},d)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),l=a(o),i=n(3),u=n(55),s=a(u),c=n(641),f=a(c),d=l.default.createElement(i.Route,{path:"/",component:s.default},l.default.createElement(i.Route,{path:"/timeBuy/:activityClass",component:f.default,title:"限时特卖"}));t.default=r,e.exports=t.default},639:function(e,t,n){"use strict";function a(e){var t=e.activityClass,n=e.pageNo,a=e.activityType,o=e.pageSize;return r.fetch.get("/flashSaleApi/list",{activityClass:t,pageNo:n,activityType:a,pageSize:o})}Object.defineProperty(t,"__esModule",{value:!0}),t.flashSaleApiList=a;var r=n(2)},640:function(e,t,n){"use strict";new(n(2).Startup)({allReducers:n(221),routes:n(473)}).run(function(){})},641:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=(n(24),n(23)),u=a(i),s=(n(61),n(60)),c=a(s),f=(n(12),n(11)),d=a(f),p=(n(7),n(6)),y=a(p),m=(n(52),n(51)),h=a(m),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),g=n(0),b=a(g),w=n(3),C=n(639),E=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(C),_=n(4),S=n(2);n(760);var j=h.default.TabPane,O=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onTabChange=function(e){E.flashSaleApiList({activityClass:e,pageNo:1,activityType:60,pageSize:15}).then(function(e){if(1==e.result){var t=e.data[0];n.goodsList=t.goodsList,n.setState({dataSource:n.ds.cloneWithRows(t.goodsList)}),n.timer&&clearInterval(n.timer),n.timer=setInterval(n.countdown,1e3,1e3),n.countdown()}})},n.countdown=function(){var e=n.goodsList.map(function(e){var t=e.currentTime,n=e.endTime,a=parseInt((n-t)/1e3),r=Math.floor(a/60/60),o=parseInt(r/24),l=Math.floor(r-24*o),i=Math.floor((a-60*r*60)/60),u=Math.floor(a-60*r*60-60*i);return a<0&&(r="0",i="00",u="00",o="00",l="00"),e.currentTime=t+1e3,e.countdown=o+" 天 "+(l<10?"0"+l:l)+" 时 "+(i<10?"0"+i:i)+" 分 "+(u<10?"0"+u:u)+" 秒 ",e});n.goodsList=e,n.setState({dataSource:n.ds.cloneWithRows(e)})},n.renderItem=function(e){return b.default.createElement(y.default,null,b.default.createElement(y.default.Item,{style:{flex:1}},b.default.createElement(_.Img,{src:e.goodsImage,style:{width:"2rem",height:"2rem"}})),b.default.createElement(y.default.Item,{style:{flex:2}},b.default.createElement("p",null,e.goodsName),b.default.createElement(y.default,{justify:"between",style:{marginRight:".1rem"}},b.default.createElement("div",{style:{color:"red"}},"¥"+e.price),b.default.createElement("div",{style:{textDecoration:"line-through"}},"¥"+e.specGoodsPrice),b.default.createElement(d.default,{size:"small",inline:!0,type:"primary",onClick:function(){return n.gotoBuy(e)}},"马上抢")),b.default.createElement(y.default,{justify:"end",style:{marginRight:".1rem"}},b.default.createElement("p",{style:{height:"0.3rem",color:"red"}},e.countdown))))},n.gotoBuy=function(e){S.common.gotoGoodsDetail({specId:e.goodsSpecId})},n.renderHeader=function(){var e=n.state,t=e.qiangClass,a=e.defaultActiveClass;e.scrollAdv,e.goodsList;return b.default.createElement(h.default,{swipeable:!1,onChange:n.onTabChange,defaultActiveKey:a},t.map(function(e,t){return b.default.createElement(j,{tab:e.dictionaryName,key:e.dictionaryValue})}))},n.ds=new c.default.DataSource({rowHasChanged:function(e,t){return e!==t}}),n.timer=null,n.state={qiangClass:[],defaultActiveClass:e.params.activityClass,dataSource:n.ds.cloneWithRows([])},n}return l(t,e),v(t,[{key:"componentDidMount",value:function(){var e=this;E.flashSaleApiList({activityClass:this.state.defaultActiveClass,pageNo:1,activityType:60,pageSize:1}).then(function(t){if(1==t.result){var n=t.data[0].qiangClass;n&&n.length>0&&(e.setState({qiangClass:n}),e.onTabChange(e.state.defaultActiveClass))}})}},{key:"render",value:function(){var e=this.state,t=e.qiangClass;e.defaultActiveClass,e.scrollAdv,e.goodsList;return 0==t.length?null:b.default.createElement("div",{className:"fix-scroll",style:{paddingTop:"0.9rem"}},this.renderHeader(),b.default.createElement(u.default,null),b.default.createElement(c.default,{dataSource:this.state.dataSource,renderRow:this.renderItem,stickyHeader:!0,delayTime:10}))}}]),t}(g.Component);t.default=(0,w.withRouter)(O),e.exports=t.default},760:function(e,t){}},[640]);