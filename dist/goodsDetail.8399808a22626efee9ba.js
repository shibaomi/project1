webpackJsonp([2],{1053:function(e,t,n){var o=n(29);e.exports=o.add('<symbol viewBox="0 0 44 44" id="comment" xmlns:xlink="http://www.w3.org/1999/xlink"> <g> <circle fill="#4A4A4A" cx="13.828" cy="19.63" r="1.938"/> <circle fill="#4A4A4A" cx="21.767" cy="19.63" r="1.938"/> <circle fill="#4A4A4A" cx="29.767" cy="19.63" r="1.938"/> <path fill="#4A4A4A" d="M22.102,4.161c-9.918,0-17.958,7.146-17.958,15.961c0,4.935,2.522,9.345,6.481,12.273v5.667l0.038,0.012\n\t\tc0.182,1.28,1.272,2.267,2.602,2.267c0.747,0,1.419-0.313,1.899-0.812l0.002,0.001l5.026-3.539\n\t\tc0.628,0.059,1.265,0.093,1.911,0.093c9.918,0,17.958-7.146,17.958-15.961C40.06,11.307,32.02,4.161,22.102,4.161z M22.062,34.062\n\t\tc-0.902,0-1.781-0.081-2.642-0.207l-5.882,4.234c-0.024,0.025-0.055,0.04-0.083,0.06l-0.008,0.006l0,0\n\t\tc-0.083,0.055-0.177,0.095-0.284,0.095c-0.29,0-0.525-0.235-0.525-0.525l0.005-6.375c-3.91-2.516-6.456-6.544-6.456-11.1\n\t\tc0-7.628,7.107-13.812,15.875-13.812s15.875,6.184,15.875,13.812S30.83,34.062,22.062,34.062z"/> </g> </symbol>',"comment")},1067:function(e,t,n){function o(e){return n(a(e))}function a(e){var t=l[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var l={"./index.js":216};o.keys=function(){return Object.keys(l)},o.resolve=a,e.exports=o,o.id=1067},216:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1067),a=o.keys().filter(function(e){return"./index.js"!==e}),l=a.reduce(function(e,t){return e[t.match(/([^\/]+)\.js$/)[1]]=o(t),e},{});t.default=l,e.exports=t.default},231:function(e,t,n){"use strict";function o(){return r.fetch.get("/cartapi/cartList")}function a(e){var t=e.goodsId,n=e.count,o=e.specId,a=e.saveType;return r.fetch.get("/cartapi/addCart",{goodsId:t,count:n,specId:o,saveType:a})}function l(e){var t=e.goodsId,n=e.specStr;return r.fetch.get("/cartapi/addCartBach",{goodsId:t,specStr:n})}Object.defineProperty(t,"__esModule",{value:!0}),t.cartList=o,t.addCart=a,t.addCartBach=l;var r=n(2)},232:function(e,t,n){"use strict";function o(e){var t=e.storeId;return l.fetch.get("/storeapi/couponlist",{storeId:t})}function a(e){var t=e.couponId,n=e.storeId;return l.fetch.get("/storeapi/receiveCoupon",{couponId:t,storeId:n})}Object.defineProperty(t,"__esModule",{value:!0}),t.couponlist=o,t.receiveCoupon=a;var l=n(2)},233:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var l=(n(12),n(11)),r=o(l),u=(n(26),n(25)),c=o(u),d=(n(7),n(6)),s=o(d),i=(n(24),n(23)),f=o(i),m=(n(5),n(8)),p=o(m);t.default=function(e){var t=e.goodsDetailInfo,n=e.gotoEvaluateList,o=e.gotoConsultation,l=t.evaluateGoodsList,u=t.evaluate/5,d=100*u.toFixed(2);return h.default.createElement(p.default,null,h.default.createElement(p.default.Item,{onClick:function(){return n(t)},extra:d+"%好评",arrow:"horizontal"},"商品评价(",""+t.commentnum,"） "),l&&l.map(function(e,t){var n=e.gevalImage&&e.gevalImage.split(",").map(function(e,t){return h.default.createElement(y.Img,{key:t,src:e,style:{width:"1.5rem",height:"1.5rem"}})});return h.default.createElement(c.default,{key:t},h.default.createElement(f.default,null),h.default.createElement(s.default,null,h.default.createElement(s.default.Item,null,[].concat(a(Array(e.gevalScore))).map(function(e,t){return h.default.createElement("img",{key:t,src:"./assets/img/star-on.png",style:{width:".36rem",height:".36rem"}})}),[].concat(a(Array(5-e.gevalScore))).map(function(e,t){return h.default.createElement("img",{key:t,src:"./assets/img/star-off.png",style:{width:".36rem",height:".36rem"}})})),h.default.createElement(s.default.Item,{style:{textAlign:"right"}},e.gevalFrommembername)),h.default.createElement(f.default,null),h.default.createElement("div",null,e.gevalContent),h.default.createElement(f.default,null),e.gevalImage&&h.default.createElement("div",null,n))}),h.default.createElement(p.default.Item,null,h.default.createElement(s.default,null,h.default.createElement(s.default.Item,null,h.default.createElement(r.default,{onClick:function(){return n(t)}},"商品晒单 (",t.commentnum,")")),h.default.createElement(s.default.Item,null,h.default.createElement(r.default,{onClick:function(){return o(t)}},"购买咨询 (",t.consultationNum,")")))))};var g=n(0),h=o(g),y=n(4);n(2);e.exports=t.default},234:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=(n(46),n(45)),l=o(a),r=(n(7),n(6)),u=o(r),c=(n(52),n(51)),d=o(c);t.default=function(e){var t=e.goodsDetailInfo;return i.default.createElement(d.default,{defaultActiveKey:"1",activeTextColor:"#E43F47",activeUnderlineColor:"#E43F47",swipeable:!1},i.default.createElement(p,{tab:"猜你喜欢",key:"1"},t.recommendList&&i.default.createElement(l.default,{onClick:g,renderItem:function(e,t){return h(e)},data:t.recommendList,columnNum:3})),i.default.createElement(p,{tab:"排行榜",key:"2"},t.orderList&&i.default.createElement(l.default,{onClick:g,renderItem:function(e,t){return h(e)},data:t.orderList,columnNum:3})))};var s=n(0),i=o(s),f=n(4),m=n(2),p=d.default.TabPane,g=function(e){m.common.gotoGoodsDetail({specId:e.specId})},h=function(e){return i.default.createElement(u.default,{style:{textAlign:"center"},direction:"column"},i.default.createElement("div",null,i.default.createElement(u.default.Item,null,i.default.createElement(f.Img,{src:e.goodsImage,style:{height:"2rem",width:"2rem"}}))),i.default.createElement(u.default.Item,null,i.default.createElement("span",null,e.gcName)),i.default.createElement("div",null,i.default.createElement(u.default.Item,null,i.default.createElement("div",{style:{fontSize:".24rem",width:"1.8rem",color:"gray"},className:"text-overflow-hidden"},e.goodsName))),i.default.createElement(u.default.Item,null,i.default.createElement("span",{style:{fontSize:".24rem",color:"red"}},"¥"+e.goodsStorePrice)))};e.exports=t.default},235:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=(n(52),n(51)),l=o(a);t.default=function(e){var t=e.goodsDetailInfo,n=t.mobileBody,o=[];return n instanceof Array?o=n:(n=n.replace(/&quot;/g,'"'))&&""!=n&&(o=JSON.parse(n)),u.default.createElement(l.default,{animated:!1,defaultActiveKey:"1",swipeable:!1,activeTextColor:"#E43F47"},u.default.createElement(d,{tab:"商品介绍",key:"1"},o&&o.length>0&&o.map(function(e,t){if("image"==e.type)return u.default.createElement(c.Img,{key:t,src:e.value,style:{width:"100%"}})})),u.default.createElement(d,{tab:"规格参数",key:"2",style:{overflowX:"hidden"}},u.default.createElement("div",{dangerouslySetInnerHTML:{__html:t.goodsProperty}})),u.default.createElement(d,{tab:"包装售后",key:"3"},u.default.createElement("div",{style:{minHeight:"200px"}},t.afterSale)))};var r=n(0),u=o(r),c=n(4),d=l.default.TabPane;e.exports=t.default},236:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=(n(26),n(25)),l=o(a),r=(n(12),n(11)),u=o(r),c=(n(24),n(23)),d=o(c),s=(n(7),n(6)),i=o(s),f=(n(52),n(51)),m=o(f);t.default=function(e){var t=e.goodsDetailInfo,n=t.evaluateStore,o=t.storeId;return g.default.createElement(l.default,null,g.default.createElement(i.default,null,g.default.createElement(i.default.Item,{style:{flex:1}},g.default.createElement(y.Img,{src:t.storeLabel,style:{width:"100%"}})),g.default.createElement(i.default.Item,{style:{flex:2}},g.default.createElement(i.default,null,g.default.createElement(i.default.Item,{style:{flex:2}},g.default.createElement("div",null,t.storeName,g.default.createElement("br",null),g.default.createElement("font",{color:"gray"},"正品行货,欢迎选购"))),g.default.createElement(i.default.Item,{style:{flex:1}},g.default.createElement("div",{style:{color:"red",textAlign:"right"}},n.averageCredit))))),g.default.createElement(d.default,null),g.default.createElement(i.default,null,g.default.createElement(i.default.Item,null,g.default.createElement(i.default,{direction:"column"},g.default.createElement(i.default.Item,null,"商品",n.sevalDesccredit),g.default.createElement(i.default.Item,null,t.evaluateNum),g.default.createElement(i.default.Item,null,"关注人数"))),g.default.createElement(i.default.Item,null,g.default.createElement(i.default,{direction:"column"},g.default.createElement(i.default.Item,null,"服务",n.sevalServicecredit),g.default.createElement(i.default.Item,null,t.storeGoodsNum),g.default.createElement(i.default.Item,null,"全部商品"))),g.default.createElement(i.default.Item,null,g.default.createElement(i.default,{direction:"column"},g.default.createElement(i.default.Item,null,"物流",n.sevalDeliverycredit),g.default.createElement(i.default.Item,null,"149"),g.default.createElement(i.default.Item,null,"店铺动态")))),g.default.createElement(d.default,null),"0"!=o&&g.default.createElement(i.default,null,g.default.createElement(i.default.Item,null,g.default.createElement(u.default,null,"联系客服")),g.default.createElement(i.default.Item,null,g.default.createElement(u.default,{onClick:function(){return v(t)}},"进入店铺"))))};var p=n(0),g=o(p),h=n(2),y=n(4),v=(m.default.TabPane,function(e){h.common.gotoStore({storeId:e.storeId})});e.exports=t.default},257:function(e,t){},468:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.history;return r.default.createElement(u.Router,{history:t},I)}Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),r=o(l),u=n(3),c=n(55),d=o(c),s=n(570),i=o(s),f=n(571),m=o(f),p=n(569),g=o(p),h=n(568),y=o(h),v=n(567),E=o(v),I=r.default.createElement(u.Route,{path:"/",component:d.default},r.default.createElement(u.Route,{path:"/:specId",component:i.default,title:"商品详情"}),r.default.createElement(u.Route,{path:"multiSpec/:specId",component:m.default,title:"商品详情"}),r.default.createElement(u.Route,{path:"evaluteList/:goodsId",component:g.default,title:"评价"}),r.default.createElement(u.Route,{path:"consultList/:goodsId",component:y.default,title:"购买咨询"}),r.default.createElement(u.Route,{path:"consultEdit/:goodsId",component:E.default,title:"购买咨询"}));t.default=a,e.exports=t.default},564:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=(n(128),n(127)),d=o(c),s=(n(5),n(8)),i=o(s),f=(n(10),n(9)),m=o(f),p=(n(7),n(6)),g=o(p),h=(n(32),n(31)),y=o(h),v=(n(52),n(51)),E=o(v),I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},b=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),C=n(0),S=o(C),w=n(4);n(2);n(738);var _=E.default.TabPane,O=function(e){function t(e){l(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.renderHeader=function(){var e=n.props.goodsDetailInfo,t=e.goodsImage,o=e.goodsName,a=n.state.goodsSpec;return S.default.createElement("div",null,S.default.createElement("div",{style:{position:"relative"}},S.default.createElement("span",{style:{position:"absolute",right:3,top:-5},onClick:function(){return n.props.onClose("cancel")}},S.default.createElement(y.default,{type:"cross"}))),S.default.createElement(g.default,{style:{height:"200px"}},S.default.createElement(g.default.Item,{style:{flex:1}},S.default.createElement(w.Img,{src:t,style:{height:"200px"}})),S.default.createElement(g.default.Item,{style:{flex:2}},S.default.createElement("div",{style:{color:"red"}},"¥"+a.specGoodsPrice),S.default.createElement("div",null,o))))},n.onChangeNum=function(e,t,o){var l=I({},n.state.buyCount,a({},e.goodsSpecId,{num:t,name:o,source:e})),r={};Object.keys(l).forEach(function(e){l[e].num>0&&(r[e]=l[e])}),l=r,n.setState({buyCount:l}),n.props.onChangeBuyNum(l)},n.addCart=function(){n.props.addCart(n.state.buyCount)},n.gotoBuy=function(){if(0==Object.keys(n.state.buyCount).length)return void m.default.info("请选择规格和数量",1);n.props.gotoBuy(n.state.buyCount)},n.state={goodsSpec:e.goodsDetailInfo.goodsSpec,buyCount:e.buyCount},n}return u(t,e),b(t,[{key:"render",value:function(){var e=this,t=this.props.goodsDetailInfo,n=t.specs,o=(t.specName,t.goodsName,t.goodsImage,t.goodsSpecValueAll,this.state),a=(o.goodsSpec,o.buyCount),l=n.flag,r={};l?Object.keys(n).forEach(function(e){"flag"!=e&&(r[e]=n[e])}):r["默认"]=n.data;var u=this.onChangeNum,c=0,s=0;return Object.keys(a).forEach(function(e){c+=a[e].num;var t=parseFloat(a[e].source.specGoodsPrice)*parseFloat(a[e].num);s=parseFloat(s)+t}),s=parseFloat(s).toFixed(2),S.default.createElement("div",{style:{marginBottom:"1.1rem"}},S.default.createElement(i.default,{renderHeader:function(){return e.renderHeader()}}),S.default.createElement(E.default,{animated:!1,onChange:function(){},onTabClick:function(){}},Object.keys(r).map(function(e){return S.default.createElement(_,{tab:e,key:e},S.default.createElement("div",{style:{height:"5rem",backgroundColor:"#fff",padding:"0 0.2rem"}},r[e].map(function(t){var n=a[t.goodsSpecId]&&a[t.goodsSpecId].num||0;return S.default.createElement(g.default,{key:t.goodsSpecId,style:{height:"1.5rem",borderBottom:"1px solid #e5e5e5"},justify:"between"},S.default.createElement(g.default.Item,null,S.default.createElement("div",{style:{height:".78rem"}},t.specName)),S.default.createElement(g.default,{direction:"column",align:"end"},S.default.createElement(d.default,{style:{minWidth:"1.5rem"},showNumber:!0,min:0,max:t.specGoodsStorage,onChange:function(n){return u(t,n,e)},size:"small",value:n}),S.default.createElement("span",{style:{color:"#999",fontSize:".24rem"}},"库存：",t.specGoodsStorage)))})))})),S.default.createElement(g.default,{justify:"end",style:{height:".64rem",paddingRight:"0.1rem"}},S.default.createElement("div",null,"共",c,"件 ￥",s)),S.default.createElement(w.CartBar,{gotoBuy:this.gotoBuy,addCart:this.addCart}))}}]),t}(S.default.PureComponent);t.default=O,e.exports=t.default},565:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=(n(128),n(127)),c=o(u),d=(n(5),n(8)),s=o(d),i=(n(7),n(6)),f=o(i),m=(n(32),n(31)),p=o(m),g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},h=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),y=n(0),v=o(y),E=n(4),I=(n(2),n(88)),b=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(I),C=n(13),S=o(C);n(739);var w=function(e){function t(){return a(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),h(t,[{key:"render",value:function(){var e=this.props,t=e.values,n=e.selectedValue,o=e.onChangeSpec;return v.default.createElement("div",{className:"wx-goods-detail-spec-group"},t.map(function(e,t){var a=(0,S.default)("am-tag",{"am-tag-active":n.includes(e.spValueId),"am-tag-normal":!n.includes(e.spValueId)});return v.default.createElement("div",{key:t,onClick:function(){return o(e)},className:a,style:{marginLeft:"0.18rem"}},v.default.createElement("div",{className:"am-tag-text"},e.spValueName))}))}}]),t}(v.default.PureComponent),_=function(e){function t(e){a(this,t);var n=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.renderHeader=function(){var e=n.state,t=e.goodsImage,o=e.goodsSpec,a=e.goodsName;return v.default.createElement("div",null,v.default.createElement("div",{style:{position:"relative"}},v.default.createElement("span",{style:{position:"absolute",right:3,top:-5},onClick:function(){return n.props.onClose("cancel")}},v.default.createElement(p.default,{type:"cross"}))),v.default.createElement(f.default,{style:{height:"200px"}},v.default.createElement(f.default.Item,{style:{flex:1}},v.default.createElement(E.Img,{src:t,style:{height:"200px"}})),v.default.createElement(f.default.Item,{style:{flex:2}},v.default.createElement("div",{style:{color:"red"}},"¥"+o.specGoodsPrice),v.default.createElement("div",null,a))))},n.onChangeSpec=function(e){var t=n.state,o=t.goodsSpec,a=t.goodsSpecValueAll,l=o.specGoodsSpec;if(1!=a[e.spId].length){a[e.spId].forEach(function(e){delete l[e.spValueId]}),n.onChangeNum(1),l[e.spValueId]=e.spValueName;var r=Object.keys(l).join();b.getSpecByGoodsIdAndSpecIds({goodsId:o.goodsId,specIds:r}).then(function(e){if(1==e.result){var t=e.data[0];n.setState({goodsSpec:g({},n.state.goodsSpec,{specGoodsPrice:t.price,specGoodsStorage:t.num,goodsSpecId:t.specId})}),n.props.onChangeSpec(l,t)}})}},n.onChangeNum=function(e){n.setState({buyCount:e}),n.props.onChangeBuyNum(e)},n.addCart=function(){n.props.addCart(n.state.buyCount)},n.gotoBuy=function(){n.props.gotoBuy(n.state.buyCount)},n.state={goodsSpecValueAll:e.goodsDetailInfo.goodsSpecValueAll,goodsSpec:e.goodsDetailInfo.goodsSpec,specName:e.goodsDetailInfo.specName,goodsId:e.goodsDetailInfo.goodsId,goodsName:e.goodsDetailInfo.goodsName,goodsImage:e.goodsDetailInfo.goodsImage,buyCount:e.buyCount},n}return r(t,e),h(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.goodsSpecValueAll,o=t.goodsSpec,a=t.specName,l=(t.goodsName,t.goodsImage,o.specGoodsSpec);return v.default.createElement("div",{style:{marginBottom:"1.1rem"}},v.default.createElement(s.default,{renderHeader:function(){return e.renderHeader()}},Object.keys(n).map(function(t){var o=n[t],r=o.filter(function(e){return Object.keys(l).includes(e.spValueId)}).map(function(e){return e.spValueId});return v.default.createElement(s.default.Item,{key:t},v.default.createElement(f.default,{direction:"column",align:"start"},v.default.createElement(f.default.Item,null,a[t]),v.default.createElement(f.default.Item,null,v.default.createElement(w,{ref:"specGroup-"+t,specGoodsSpec:l,selectedValue:r,values:o,onChangeSpec:e.onChangeSpec}))))}),v.default.createElement(s.default.Item,{extra:v.default.createElement(c.default,{ref:"stepper",style:{width:"50%",minWidth:"2rem"},showNumber:!0,min:0,max:parseInt(o.specGoodsStorage),size:"small",onChange:this.onChangeNum,value:this.state.buyCount})},"数量"),v.default.createElement(s.default.Item,null,"库存:",o.specGoodsStorage)),v.default.createElement(E.CartBar,{gotoBuy:this.gotoBuy,addCart:this.addCart}))}}]),t}(v.default.PureComponent);t.default=_,e.exports=t.default},566:function(e,t,n){"use strict";new(n(2).Startup)({allReducers:n(216),routes:n(468)}).run(function(){})},567:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u,c,d=(n(108),n(107)),s=o(d),i=(n(10),n(9)),f=o(i),m=(n(5),n(8)),p=o(m),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),h=n(0),y=o(h),v=n(3),E=(n(2),n(88)),I=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(E),b=(p.default.Item,c=u=function(e){function t(){var e,n,o,r;a(this,t);for(var u=arguments.length,c=Array(u),d=0;d<u;d++)c[d]=arguments[d];return n=o=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),o.state={content:""},o.submit=function(){if(""==o.state.content)return void f.default.info("咨询内容不能为空",1);o.state.content.length>200?f.default.info("请将咨询字数控制在200个以内"):I.saveConsult({goodsId:o.props.params.goodsId,consultContent:o.state.content}).then(function(e){1==e.result?(f.default.info(e.msg,1),o.props.router.goBack()):f.default.info("购买咨询发布失败",1)})},r=n,l(o,r)}return r(t,e),g(t,[{key:"componentWillUnmount",value:function(){this.context.clearAction()}},{key:"componentDidMount",value:function(){this.context.initAction({title:"提交",action:this.submit})}},{key:"render",value:function(){var e=this;return y.default.createElement(p.default,{renderHeader:"咨询内容"},y.default.createElement(s.default,{value:this.state.content,onChange:function(t){return e.setState({content:t})},placeholder:"请输入咨询内容",rows:5,autoFocus:!0}))}}]),t}(h.Component),u.contextTypes={initAction:y.default.PropTypes.func,clearAction:y.default.PropTypes.func},c);t.default=(0,v.withRouter)(b),e.exports=t.default},568:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c,d,s=(n(32),n(31)),i=o(s),f=(n(61),n(60)),m=o(f),p=(n(26),n(25)),g=o(p),h=(n(7),n(6)),y=o(h),v=(n(24),n(23)),E=o(v),I=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),b=n(0),C=o(b),S=n(3),w=n(4),_=(n(2),n(88)),O=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(_),j=n(1053),k=o(j);n(740);var x=1,N=(d=c=function(e){function t(e){l(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.refreshList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;O.goodsConsultList({goodsId:n.props.params.goodsId,pageNo:e}).then(function(e){if(1==e.result){var t=e.data||[],o=!0;t.length<10&&(o=!1),n.consultList=[].concat(a(n.consultList),a(t)),n.setState({isLoading:!1,hasMore:o,dataSource:n.ds.cloneWithRows(n.consultList)})}})},n.renderItem=function(e){return C.default.createElement("div",{style:{width:"100%"}},C.default.createElement(E.default,null),C.default.createElement(g.default,null,C.default.createElement(y.default,{justify:"between"},C.default.createElement("div",null,e.isanonymous?C.default.createElement("span",{style:{width:".36rem"}}," "):C.default.createElement(w.Img,{src:e.memberImg,style:{width:".36rem",height:".36rem"}}),C.default.createElement("span",null,e.cmemberName)),C.default.createElement("span",null,e.createTimeStr)),C.default.createElement("p",null,"咨询内容:"),C.default.createElement("p",{style:{width:"80%",display:"inline-block",wordWrap:"break-word"}},e.consultContent)),C.default.createElement(E.default,null))},n.onEndReached=function(){n.state.hasMore&&!n.state.isLoading&&(n.setState({isLoading:!0}),n.refreshList(++x))},n.ds=new m.default.DataSource({rowHasChanged:function(e,t){return e!==t}}),n.consultList=[],n.state={hasMore:!1,isLoading:!1,dataSource:n.ds.cloneWithRows(n.consultList)},n}return u(t,e),I(t,[{key:"componentWillUnmount",value:function(){this.context.clearAction()}},{key:"componentDidMount",value:function(){var e=this;this.context.initAction({title:C.default.createElement(i.default,{type:k.default,onClick:function(){e.props.router.push("/consultEdit/"+e.props.params.goodsId)}})}),this.refreshList()}},{key:"render",value:function(){this.state.consultList,C.default.createElement("div",{style:{textAlign:"center"}},this.state.isLoading?"加载中...":"加载完毕");return C.default.createElement("div",{className:"wx-ConsultList fix-scroll hastitle"},C.default.createElement(m.default,{style:{height:"100%"},pageSize:10,onEndReached:this.onEndReached,onEndReachedThreshold:200,dataSource:this.state.dataSource,renderRow:this.renderItem}))}}]),t}(b.Component),c.contextTypes={initAction:C.default.PropTypes.func,clearAction:C.default.PropTypes.func},d);t.default=(0,S.withRouter)(N),e.exports=t.default},569:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=(n(26),n(25)),d=o(c),s=(n(7),n(6)),i=o(s),f=(n(24),n(23)),m=o(f),p=(n(126),n(125)),g=o(p),h=(n(5),n(8)),y=o(h),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),E=n(0),I=o(E),b=n(3),C=n(4),S=n(2),w=n(1),_=o(w),O=n(88),j=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(O);n(741);var k=(y.default.Item,function(e){function t(e){l(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onChange=function(e){var t=null,o=1;switch(e){case 0:t=null;break;case 1:t=5;break;case 2:t=3;break;case 3:t=1;break;case 4:t="",o=0}n.setState({selectedIndex:e}),j.goodsEvaluteList({goodsId:n.props.params.goodsId,gevalScore:t,gevalImg:o}).then(function(e){if(1==e.result){var t=e.data;t&&t.length>0&&n.setState({evaluteList:t[0].beanList||[],countAll:t[0].countAll})}})},n.state={evaluteList:[],countAll:null,selectedIndex:0},n}return u(t,e),v(t,[{key:"componentDidMount",value:function(){this.onChange()}},{key:"render",value:function(){var e=this,t=this.state,n=t.evaluteList,o=t.countAll,l=t.selectedIndex,r=[];return o&&(r.push(I.default.createElement("div",null,"全部评论",I.default.createElement("div",null,"(",o.all,")"))),r.push(I.default.createElement("div",null,"好评",I.default.createElement("div",null,"(",o.good,")"))),r.push(I.default.createElement("div",null,"中评",I.default.createElement("div",null,"(",o.general,")"))),r.push(I.default.createElement("div",null,"差评",I.default.createElement("div",null,"(",o.bad,")"))),r.push(I.default.createElement("div",null,"晒图",I.default.createElement("div",null,"(",o.ImgCount,")")))),I.default.createElement("div",{className:"wx-EvaluteList"},o&&I.default.createElement(g.default,{tintColor:"red",selectedIndex:l,style:{textAlign:"center",height:"1rem",position:"fixed",top:"0.9rem",left:0,width:"100%",zIndex:100},values:r,onChange:function(t){return e.onChange(t.nativeEvent.selectedSegmentIndex)}}),I.default.createElement("div",{className:"fix-scroll",style:{paddingTop:"1.9rem",backgroundColor:"white"}},I.default.createElement(y.default,null,n&&n.map(function(e,t){var n=e.gevalImage&&e.gevalImage.split(",").map(function(e,t){return I.default.createElement(C.Img,{key:t,src:e,style:{width:"1.5rem",height:"1.5rem"}})});return I.default.createElement(d.default,{key:t},I.default.createElement(m.default,null),I.default.createElement(i.default,{justify:"between"},I.default.createElement("div",null,I.default.createElement(C.Img,{src:e.gevalFrommemberAvatar,style:{width:".36rem",height:".36rem"}}),I.default.createElement("span",null,e.gevalFrommembername)),I.default.createElement("div",null,(0,_.default)(e.gevalAddTime).format("YYYY-MM-DD HH:mm:ss"))),I.default.createElement(m.default,null),I.default.createElement(i.default,null,I.default.createElement(i.default.Item,null,[].concat(a(Array(e.gevalScore))).map(function(e,t){return I.default.createElement("img",{key:t,src:S.common.SERVER_DOMAIN+"/res_v4.0/js/jquery.raty/img/star-on.png",style:{width:".36rem",height:".36rem"}})}),[].concat(a(Array(5-e.gevalScore))).map(function(e,t){return I.default.createElement("img",{key:t,src:S.common.SERVER_DOMAIN+"/res_v4.0/js/jquery.raty/img/star-off.png",style:{width:".36rem",height:".36rem"}})}))),I.default.createElement(m.default,null),I.default.createElement("div",null,e.gevalContent),I.default.createElement(m.default,null),e.gevalImage&&I.default.createElement("div",null,n),I.default.createElement("p",{style:{fontSize:".24rem",color:"gray"},dangerouslySetInnerHTML:{__html:e.specInfo}}),I.default.createElement("p",{style:{fontSize:".24rem",color:"gray"}},"购买日期:",(0,_.default)(e.orderAddTime).format("YYYY-MM-DD HH:mm:ss")))}))))}}]),t}(E.Component));t.default=(0,b.withRouter)(k),e.exports=t.default},570:function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var d=(n(24),n(23)),s=a(d),i=(n(5),n(8)),f=a(i),m=(n(26),n(25)),p=a(m),g=(n(7),n(6)),h=a(g),y=(n(41),n(40)),v=a(y),E=(n(84),n(83)),I=a(E),b=(n(86),n(85)),C=a(b),S=(n(10),n(9)),w=a(S),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),O=n(0),j=a(O),k=n(3),x=n(4),N=n(2),P=n(129),D=a(P),L=n(235),A=a(L),M=n(234),T=a(M),B=n(236),R=a(B),G=n(565),F=a(G),z=n(233),H=a(z),V=n(135),U=n(88),J=o(U),Y=n(231),W=o(Y),q=n(232),K=o(q);n(257);var X=function(e){function t(e){r(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.refresh=function(){w.default.loading(),W.cartList().then(function(e){if(1==e.result&&e.data){var t=0;e.data.forEach(function(e){t+=e.goodsNum}),n.setState({cartNum:t})}}),J.goodsdetail({specId:n.props.params.specId}).then(function(e){if(w.default.hide(),1!=e.result)return void w.default.error(e.msg);var t=(0,V.Map)(e.data[0]);n.setState({goodsDetailInfo:t,isFav:t.isFav}),n.refs.detailScroll.scrollTop=0,N.common.isLogin()&&setTimeout(function(){J.goodsBrowseSaveOrUpdate({goodsId:t.get("goodsId")})},100)})},n.gotoEvaluateList=function(e){n.props.router.push("/evaluteList/"+e.goodsId)},n.gotoConsultation=function(e){n.props.router.push("/consultList/"+e.goodsId)},n.getCoupon=function(){var e=n.state.goodsDetailInfo.toJS();K.couponlist({storeId:e.storeId}).then(function(t){var n=t.data;n&&n.length>0?C.default.show(j.default.createElement(D.default,{storeId:e.storeId,couponList:n,onClose:function(){return C.default.hide()}}),{animationType:"slide-up"}):w.default.info("暂无优惠券可领券",1)})},n.getSpec=function(e){e.preventDefault(),e.nativeEvent.stopImmediatePropagation(),e.stopPropagation();var t=n.state.goodsDetailInfo.toJS();C.default.show(j.default.createElement(F.default,{addCart:n.addCart,gotoBuy:n.gotoBuy,buyCount:n.state.buyCount,onChangeSpec:n.onChangeSpec,onChangeBuyNum:n.onChangeBuyNum,goodsDetailInfo:t,onClose:function(){return C.default.hide()}}),{animationType:"slide-up"})},n.onChangeBuyNum=function(e){n.setState({buyCount:e})},n.storecollection=function(){N.common.checkLogin();var e=n.state.goodsDetailInfo.get("goodsSpec");J.storecollection({favType:1,goodsId:e.goodsId}).then(function(e){1==e.result?(1==e.isfav&&w.default.info("已收藏"),n.setState({isFav:e.isfav})):w.default.fail(e.msg)})},n.gotoCart=function(){N.common.gotoCart()},n.addCart=function(e){N.common.checkLogin();var t=n.state.goodsDetailInfo.get("goodsSpec");W.addCart({goodsId:t.goodsId,count:e||1,specId:t.goodsSpecId,saveType:0}).then(function(e){if(1==e.result){var t=e.data[0].cartCount;n.setState({cartNum:t}),N.common.setCartNum(t),w.default.info("商品已添加到购物车")}else w.default.fail(e.msg)})},n.gotoBuy=function(e){N.common.checkLogin();var t=n.state.goodsDetailInfo.get("goodsSpec");W.addCart({goodsId:t.goodsId,count:e||1,specId:t.goodsSpecId,saveType:1}).then(function(e){if(1==e.result){var t=e.data[0].cartCount;n.setState({cartNum:t}),N.common.setCartNum(t),N.common.gotoOrder({cartId:e.data[0].cartIds})}else w.default.fail(e.msg)})},n.onChangeSpec=function(e,t){var o=n.state.goodsDetailInfo.update("goodsSpec",function(n){return n.specGoodsStorage=t.num,n.specGoodsPrice=t.price,n.specGoodsSpec=e,n.goodsSpecId=t.specId,n});n.setState({goodsDetailInfo:o})},n.showModal=function(e,t){return function(o){var a;o.preventDefault(),n.setState((a={},l(a,e,!0),l(a,"imgurl",t),a))}},n.onClose=function(e){return function(){n.setState(l({},e,!1))}},n.Close=function(){n.setState({modal1:!1})},n.state={goodsDetailInfo:(0,V.Map)(),buyCount:1,cartNum:0,isFav:0,modal1:!1,imgurl:""},n}return c(t,e),_(t,[{key:"componentDidUpdate",value:function(e,t){e.params.specId!=this.props.params.specId&&this.refresh()}},{key:"componentDidMount",value:function(){this.refresh()}},{key:"render",value:function(){var e=this,t=this.state.goodsDetailInfo.toJS();if(!t||!t.goodsCallyList)return null;var n=t.goodsSpec.specGoodsSpec||"",o=Object.keys(n).map(function(e){return n[e]}),a=o.join(" ");return j.default.createElement("div",{className:"wx-goods-detail"},j.default.createElement("div",{ref:"detailScroll",className:"fix-scroll hastitle hasbottom",style:{backgroundColor:"white"}},j.default.createElement(I.default,{autoplay:!1,infinite:!1,dots:!0,selectedIndex:1},t.goodsCallyList.map(function(t,n){return j.default.createElement(x.Img,{key:n,src:t,onClick:e.showModal("modal1",t)})})),j.default.createElement(v.default,{title:"商品详情",visible:this.state.modal1,transparent:!0,maskClosable:!0,onClose:this.onClose("modal1"),style:{width:"8rem",height:"10rem"}},j.default.createElement(x.Img,{className:"imgDe",onClick:function(){return e.Close()},src:this.state.imgurl,style:{width:"8rem",height:"8rem"}})),j.default.createElement(h.default,{className:"wx-goods-detail-info",direction:"column",align:"start"},j.default.createElement(p.default,null,j.default.createElement(h.default.Item,null,t.goodsName)),j.default.createElement(p.default,null,j.default.createElement("p",{style:{color:"red",fontSize:".24rem"}},t.goodsSubtitle),j.default.createElement("p",{style:{color:"red",fontSize:".24rem"}},"¥"+t.goodsSpec.specGoodsPrice))),0==t.goodsShow?j.default.createElement("div",{style:{height:"1rem",background:"#ddd",lineHeight:"1rem",textAlign:"center",fontSize:"0.5rem"}},"商品已经下架啦~"):j.default.createElement("div",null,j.default.createElement(f.default,null,j.default.createElement(f.default.Item,{arrow:"horizontal",onClick:this.getCoupon},"领券猛戳这里"),j.default.createElement(f.default.Item,{arrow:"horizontal",onClick:this.getSpec},"已选：",a),j.default.createElement(f.default.Item,null,"地区：",t.cityName),j.default.createElement(f.default.Item,null,"运费：",1==t.goodsTransfeeCharge?"卖家承担运费":2==t.goodsTransfeeCharge?"免运费":"买卖家承担运费")),j.default.createElement(H.default,{gotoEvaluateList:this.gotoEvaluateList,gotoConsultation:this.gotoConsultation,goodsDetailInfo:t}),j.default.createElement(s.default,null),j.default.createElement(R.default,{goodsDetailInfo:t}),j.default.createElement(s.default,null),j.default.createElement(T.default,{goodsDetailInfo:t}),j.default.createElement(A.default,{goodsDetailInfo:t}))),j.default.createElement(x.CartBar,{storecollection:this.storecollection,isFav:this.state.isFav,data:t.goodsShow,cartNum:this.state.cartNum,showCollectionCart:!0,gotoCart:this.gotoCart,gotoBuy:this.gotoBuy,addCart:this.addCart}))}}]),t}(O.Component);t.default=(0,k.withRouter)(X),e.exports=t.default},571:function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var d=(n(24),n(23)),s=a(d),i=(n(5),n(8)),f=a(i),m=(n(26),n(25)),p=a(m),g=(n(7),n(6)),h=a(g),y=(n(41),n(40)),v=a(y),E=(n(84),n(83)),I=a(E),b=(n(86),n(85)),C=a(b),S=(n(10),n(9)),w=a(S),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),O=n(0),j=a(O),k=n(3),x=n(4),N=n(2),P=n(129),D=a(P),L=n(235),A=a(L),M=n(234),T=a(M),B=n(236),R=a(B),G=n(564),F=a(G),z=n(233),H=a(z),V=n(135),U=n(88),J=o(U),Y=n(231),W=o(Y),q=n(232),K=o(q);n(257);var X=function(e){function t(e){r(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.refreshCart=function(){W.cartList().then(function(e){if(1==e.result&&e.data){var t=0;e.data.forEach(function(e){t+=e.goodsNum}),n.setState({cartNum:t})}})},n.refresh=function(){w.default.loading(),n.refreshCart(),J.goodsInfo({specId:n.props.params.specId}).then(function(e){if(w.default.hide(),1!=e.result)return void w.default.error(e.msg);var t=(0,V.Map)(e.data[0]);n.setState({goodsDetailInfo:t,isFav:t.isFav}),n.refs.detailScroll.scrollTop=0,N.common.isLogin()&&setTimeout(function(){J.goodsBrowseSaveOrUpdate({goodsId:t.get("goodsId")})},100)})},n.gotoEvaluateList=function(e){n.props.router.push("/evaluteList/"+e.goodsId)},n.gotoConsultation=function(e){n.props.router.push("/consultList/"+e.goodsId)},n.getCoupon=function(){var e=n.state.goodsDetailInfo.toJS();K.couponlist({storeId:e.storeId}).then(function(t){var n=t.data;n&&n.length>0?C.default.show(j.default.createElement(D.default,{storeId:e.storeId,couponList:n,onClose:function(){return C.default.hide()}}),{animationType:"slide-up"}):w.default.info("暂无优惠券可领券",1)})},n.getSpec=function(e){e.preventDefault(),e.nativeEvent.stopImmediatePropagation(),e.stopPropagation(),n.showCart()},n.onChangeBuyNum=function(e){n.setState({buyCount:e})},n.storecollection=function(){N.common.checkLogin();var e=n.state.goodsDetailInfo.get("goodsSpec");J.storecollection({favType:1,goodsId:e.goodsId}).then(function(e){1==e.result?(1==e.isfav&&w.default.info("已收藏"),n.setState({isFav:e.isfav})):w.default.fail(e.msg)})},n.gotoCart=function(){N.common.gotoCart()},n.showCart=function(){var e=n.state.goodsDetailInfo.toJS();C.default.show(j.default.createElement(F.default,{addCart:n.addCart,gotoBuy:n.gotoBuy,buyCount:n.state.buyCount,onChangeSpec:n.onChangeSpec,onChangeBuyNum:n.onChangeBuyNum,goodsDetailInfo:e,onClose:function(){return C.default.hide()}}),{animationType:"slide-up"})},n.addCart=function(e){N.common.checkLogin();var t=n.state.goodsDetailInfo.get("goodsSpec");if(e){var o=n.state.buyCount,a=[];Object.keys(o).forEach(function(e){a.push(e+":"+o[e].num)}),W.addCartBach({goodsId:t.goodsId,specStr:a.join(",")}).then(function(e){1==e.result?(n.setState({buyCount:{}}),C.default.hide(),n.refreshCart(),w.default.info("商品已添加到购物车",1)):w.default.fail(e.msg)})}else n.showCart()},n.gotoBuy=function(e){N.common.checkLogin();var t=n.state.goodsDetailInfo.get("goodsSpec");if(e){var o=[];Object.keys(e).forEach(function(t){o.push(t+":"+e[t].num)}),W.addCartBach({goodsId:t.goodsId,specStr:o.join(",")}).then(function(e){1==e.result?(N.common.gotoOrder({cartId:e.data.join(",")}),w.default.info("商品已添加到购物车",1)):w.default.fail(e.msg)})}else n.showCart()},n.onChangeSpec=function(e,t){var o=n.state.goodsDetailInfo.update("goodsSpec",function(n){return n.specGoodsStorage=t.num,n.specGoodsPrice=t.price,n.specGoodsSpec=e,n.goodsSpecId=t.specId,n});n.setState({goodsDetailInfo:o})},n.showModal=function(e,t){return function(o){var a;o.preventDefault(),n.setState((a={},l(a,e,!0),l(a,"imgurl",t),a))}},n.onClose=function(e){return function(){n.setState(l({},e,!1))}},n.Close=function(){n.setState({modal1:!1})},n.state={goodsDetailInfo:(0,V.Map)(),buyCount:{},cartNum:0,isFav:0,modal1:!1,imgurl:"",selectedSpecGoodsSpec:[]},n}return c(t,e),_(t,[{key:"componentDidUpdate",value:function(e,t){e.params.specId!=this.props.params.specId&&this.refresh()}},{key:"componentDidMount",value:function(){this.refresh()}},{key:"render",value:function(){var e=this,t=this.state.goodsDetailInfo.toJS();if(!t||!t.goodsCallyList)return null;var n=this.state.buyCount,o=t.specs,a=(t.specName,o.flag),l={},r=void 0,u=void 0;if(a){var c=[];Object.keys(o).forEach(function(e){"flag"!=e&&(l[e]=o[e],c.push(e))}),r=c.join(";")}else l["默认"]=o.data;return u=l[Object.keys(l)[0]].map(function(e){return e.specName}).join(";"),j.default.createElement("div",{className:"wx-goods-detail"},j.default.createElement("div",{ref:"detailScroll",className:"fix-scroll hastitle hasbottom",style:{backgroundColor:"white"}},j.default.createElement(I.default,{autoplay:!1,infinite:!1,dots:!0,selectedIndex:1},t.goodsCallyList.map(function(t,n){return j.default.createElement(x.Img,{key:n,src:t,onClick:e.showModal("modal1",t)})})),j.default.createElement(v.default,{title:"商品详情",visible:this.state.modal1,transparent:!0,maskClosable:!0,onClose:this.onClose("modal1"),style:{width:"8rem",height:"10rem"}},j.default.createElement(x.Img,{className:"imgDe",onClick:function(){return e.Close()},src:this.state.imgurl,style:{width:"8rem",height:"8rem"}})),j.default.createElement(h.default,{className:"wx-goods-detail-info",direction:"column",align:"start"},j.default.createElement(p.default,null,j.default.createElement(h.default.Item,null,t.goodsName)),j.default.createElement(p.default,null,j.default.createElement("p",{style:{color:"red",fontSize:".24rem"}},t.goodsSubtitle),j.default.createElement("p",{style:{color:"red",fontSize:".24rem"}},"¥"+t.goodsSpec.specGoodsPrice))),0==t.goodsShow?j.default.createElement("div",{style:{height:"1rem",background:"#ddd",lineHeight:"1rem",textAlign:"center",fontSize:"0.5rem"}},"商品已经下架啦~"):j.default.createElement("div",null,j.default.createElement(f.default,null,j.default.createElement(f.default.Item,{arrow:"horizontal",onClick:this.getCoupon},"领券猛戳这里"),j.default.createElement(f.default.Item,{arrow:"horizontal",onClick:this.getSpec},Object.keys(n).length>0?j.default.createElement(h.default,null,j.default.createElement("div",null,"已选："),j.default.createElement("div",null,Object.keys(n).map(function(e){return j.default.createElement("div",{key:e},j.default.createElement("span",null,n[e].name," ",n[e].source.specName))}))):j.default.createElement("div",{style:{display:"flex"}},j.default.createElement("div",null,"规格选择："),j.default.createElement("div",null,j.default.createElement("div",null,r),j.default.createElement("div",null,u)))),j.default.createElement(f.default.Item,null,"地区：",t.cityName),j.default.createElement(f.default.Item,null,"运费：",1==t.goodsTransfeeCharge?"卖家承担运费":2==t.goodsTransfeeCharge?"免运费":"买卖家承担运费")),j.default.createElement(H.default,{gotoEvaluateList:this.gotoEvaluateList,gotoConsultation:this.gotoConsultation,goodsDetailInfo:t}),j.default.createElement(s.default,null),j.default.createElement(R.default,{goodsDetailInfo:t}),j.default.createElement(s.default,null),j.default.createElement(T.default,{goodsDetailInfo:t}),j.default.createElement(A.default,{goodsDetailInfo:t}))),j.default.createElement(x.CartBar,{storecollection:this.storecollection,isFav:this.state.isFav,data:t.goodsShow,cartNum:this.state.cartNum,showCollectionCart:!0,gotoCart:this.gotoCart,gotoBuy:this.gotoBuy,addCart:this.addCart}))}}]),t}(O.Component);t.default=(0,k.withRouter)(X),e.exports=t.default},738:function(e,t){},739:function(e,t){},740:function(e,t){},741:function(e,t){},88:function(e,t,n){"use strict";function o(){return p.fetch.get("/memberapi/centRecommendList")}function a(){return p.fetch.get("/memberapi/memberDetail")}function l(e){var t=e.specId;return p.fetch.get("goods/api/goodsdetail",{specId:t})}function r(e){var t=e.specId;return p.fetch.get("goods/api/goodsInfo",{specId:t})}function u(e){var t=e.goodsId;return p.fetch.get("/memberapi/GoodsBrowseSaveOrUpdate",{goodsId:t})}function c(e){var t=e.goodsId,n=e.specIds;return p.fetch.get("/goods/api/getSpecByGoodsIdAndSpecIds",{goodsId:t,specIds:n})}function d(e){var t=e.favType,n=e.goodsId,o=e.storeId;return p.fetch.get("/storeapi/storecollection",{favType:t,goodsId:n,storeId:o})}function s(e){var t=e.couponId,n=e.storeId;return p.fetch.get("/storeapi/receiveCoupon",{couponId:t,storeId:n})}function i(e){var t=e.goodsId,n=e.gevalScore,o=e.gevalImg;return p.fetch.get("/goods/api/goodsEvaluteList",{goodsId:t,gevalScore:n,gevalImg:o})}function f(e){var t=e.goodsId,n=e.pageNo;return p.fetch.get("/goods/api/goodsConsultList",{goodsId:t,pageNo:n})}function m(e){var t=e.goodsId,n=e.cgoodsName,o=e.consultContent;return p.fetch.get("/goods/api/saveConsult",{goodsId:t,cgoodsName:n,consultContent:o})}Object.defineProperty(t,"__esModule",{value:!0}),t.centRecommendList=o,t.memberDetail=a,t.goodsdetail=l,t.goodsInfo=r,t.goodsBrowseSaveOrUpdate=u,t.getSpecByGoodsIdAndSpecIds=c,t.storecollection=d,t.receiveCoupon=s,t.goodsEvaluteList=i,t.goodsConsultList=f,t.saveConsult=m;var p=n(2)}},[566]);