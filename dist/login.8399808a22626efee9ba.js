webpackJsonp([6],{1070:function(e,t,o){function r(e){return o(n(e))}function n(e){var t=a[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var a={"./index.js":219};r.keys=function(){return Object.keys(a)},r.resolve=n,e.exports=r,r.id=1070},153:function(e,t,o){"use strict";function r(e){var t=e.username,o=e.password;return i.fetch.get("/loginapi/login",{username:t,password:o})}function n(e){var t=e.mobile;return i.fetch.get("/floor/api/verifyCode",{mobile:t})}function a(e){var t=e.name,o=e.password,r=e.mobile;return i.fetch.get("/memberapi/register",{name:t,password:o,mobile:r})}function u(e){var t=e.mobile;return i.fetch.get("/memberapi/findCode",{mobile:t})}function l(e){var t=e.newpassword,o=e.memberId;return i.fetch.get("/memberapi/updatePassword",{newpassword:t,memberId:o})}Object.defineProperty(t,"__esModule",{value:!0}),t.login=r,t.verifyCode=n,t.register=a,t.findCode=u,t.updatePassword=l;var i=o(2)},219:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(1070),n=r.keys().filter(function(e){return"./index.js"!==e}),a=n.reduce(function(e,t){return e[t.match(/([^\/]+)\.js$/)[1]]=r(t),e},{});t.default=a,e.exports=t.default},261:function(e,t){},471:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e){var t=e.history;return u.default.createElement(l.Router,{history:t},b)}Object.defineProperty(t,"__esModule",{value:!0});var a=o(0),u=r(a),l=o(3),i=o(55),f=r(i),c=o(624),s=r(c),d=o(625),p=r(d),m=o(623),w=r(m),b=u.default.createElement(l.Route,{path:"/",component:f.default},u.default.createElement(l.IndexRoute,{component:s.default,title:"登录"}),u.default.createElement(l.Route,{path:"reg",component:p.default,title:"手机快速注册"}),u.default.createElement(l.Route,{path:"forgetPassword",component:w.default,title:"获取验证码"}));t.default=n,e.exports=t.default},622:function(e,t,o){"use strict";new(o(2).Startup)({allReducers:o(219),routes:o(471)}).run(function(){})},623:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=(o(12),o(11)),i=r(l),f=(o(37),o(36)),c=r(f),s=(o(10),o(9)),d=r(s),p=(o(5),o(8)),m=r(p),w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},b=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),h=o(0),v=r(h),y=(o(3),o(38)),g=o(2),_=o(153),E=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(_);o(261);var O=m.default.Item,j=function(e){function t(){var e,o,r,u;n(this,t);for(var l=arguments.length,i=Array(l),f=0;f<l;f++)i[f]=arguments[f];return o=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.timout=null,r.code=null,r.memberId=null,r.state={countDown:60,showCountDown:!1},r.onSubmit=function(){var e=r.props.form.getFieldsValue();return e.mobile&&""!=e.mobile?e.code&&""!=e.code?e.password&&""!=e.password?e.password2&&""!=e.password2?e.password!=e.password2?void d.default.info("两次输入的密码不一致！"):!r.code||r.code&&r.code!=e.code?void d.default.info("验证码不正确！"):void E.updatePassword({newpassword:e.password,memberId:r.memberId}).then(function(e){if(0==e.result)return void d.default.fail(e.msg);d.default.success(e.msg),g.common.gotoLogin()}):void d.default.info("请确认密码！"):void d.default.info("请输入密码！"):void d.default.info("请输入验证码！"):void d.default.info("请输入手机号！")},r.countDown=function(){var e=r;r.timout=setTimeout(function(){e.state.countDown>0?(e.setState({countDown:e.state.countDown-1}),e.countDown()):e.setState({showCountDown:!1})},1e3,0)},r.getCode=function(){if(!r.state.showCountDown){var e=r.props.form.getFieldsValue();if(!e.mobile||""==e.mobile)return void d.default.info("请先输入手机号！");E.findCode({mobile:e.mobile}).then(function(e){if(0==e.result)return void d.default.fail(e.msg);r.code=e.data.verifyCode,r.memberId=e.data.memberId,r.setState({showCountDown:!0,countDown:60}),r.countDown()})}},u=o,a(r,u)}return u(t,e),b(t,[{key:"render",value:function(){var e=this.props.form,t=e.getFieldProps;e.getFieldError;return v.default.createElement("form",{className:"wx-reg"},v.default.createElement(m.default,null,v.default.createElement(c.default,w({},t("mobile"),{clear:!0,placeholder:"请输入验证手机号"})),v.default.createElement(c.default,w({},t("code"),{clear:!0,onExtraClick:this.getCode,placeholder:"请输入验证码",extra:this.state.showCountDown?this.state.countDown+"秒后重新获取":"获取验证码"})),v.default.createElement(c.default,w({},t("password"),{placeholder:"请输入密码",type:"password"})),v.default.createElement(c.default,w({},t("password2"),{placeholder:"请确认密码",type:"password"})),v.default.createElement(O,null,v.default.createElement(i.default,{type:"primary",onClick:this.onSubmit},"修改密码"))))}}]),t}(h.Component);t.default=(0,y.createForm)()(j),e.exports=t.default},624:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=(o(12),o(11)),i=r(l),f=(o(37),o(36)),c=r(f),s=(o(10),o(9)),d=r(s),p=(o(5),o(8)),m=r(p),w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},b=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),h=o(0),v=r(h),y=o(3),g=o(38),_=(o(2),o(153)),E=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(_);o(758);var O=m.default.Item,j=function(e){function t(e){n(this,t);var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.onSubmit=function(){o.props.form.validateFields({force:!0},function(e,t){e||E.login(o.props.form.getFieldsValue()).then(function(e){1==e.result?(d.default.success("登录成功"),localStorage.setItem("token",e.data[0].token),window.location.href=o.callBack||"home.html"):d.default.fail(e.msg,1)})})},o.validateusername=function(e,t,o){t&&t.length>4?o():o(new Error("用户名至少4个字符"))},o.props.location.query&&o.props.location.query.callBack&&(o.callBack=o.props.location.query.callBack),o}return u(t,e),b(t,[{key:"render",value:function(){var e=this.props.form,t=e.getFieldProps,o=e.getFieldError;return v.default.createElement("form",null,v.default.createElement(m.default,{renderFooter:function(){return o("username")&&o("username").join(",")}},v.default.createElement(c.default,w({},t("username",{rules:[{required:!0,message:"请输入用户名／邮箱／已验证邮箱"},{validator:this.validateusername}]}),{clear:!0,placeholder:"请输入账号"}),"帐号"),v.default.createElement(c.default,w({},t("password"),{placeholder:"请输入密码",type:"password"}),"密码"),v.default.createElement(O,null,v.default.createElement(i.default,{type:"primary",onClick:this.onSubmit},"登录")),v.default.createElement(O,{extra:v.default.createElement(y.Link,{to:"/forgetPassword",style:{color:"#777"}},"忘记密码?")},v.default.createElement(y.Link,{to:"/reg",style:{color:"#777"}},"注册账号"))))}}]),t}(h.Component);t.default=(0,g.createForm)()(j),e.exports=t.default},625:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=(o(12),o(11)),i=r(l),f=(o(37),o(36)),c=r(f),s=(o(10),o(9)),d=r(s),p=(o(5),o(8)),m=r(p),w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},b=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),h=o(0),v=r(h),y=(o(3),o(38)),g=o(2),_=o(153),E=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(_);o(261);var O=m.default.Item,j=function(e){function t(){var e,o,r,u;n(this,t);for(var l=arguments.length,i=Array(l),f=0;f<l;f++)i[f]=arguments[f];return o=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.timout=null,r.code=null,r.state={countDown:60,showCountDown:!1},r.onSubmit=function(){var e=r.props.form.getFieldsValue();return e.mobile&&""!=e.mobile?e.code&&""!=e.code?e.password&&""!=e.password?e.password2&&""!=e.password2?e.password!=e.password2?void d.default.info("两次输入的密码不一致！"):!r.code||r.code&&r.code!=e.code?void d.default.info("验证码不正确！"):void E.register({mobile:e.mobile,name:e.mobile,password:e.password}).then(function(e){if(0==e.result)return void d.default.fail(e.msg);d.default.success(e.msg),g.common.gotoLogin()}):void d.default.info("请确认密码！"):void d.default.info("请输入密码！"):void d.default.info("请输入验证码！"):void d.default.info("请输入手机号！")},r.countDown=function(){var e=r;r.timout=setTimeout(function(){e.state.countDown>0?(e.setState({countDown:e.state.countDown-1}),e.countDown()):e.setState({showCountDown:!1})},1e3,0)},r.getCode=function(){if(!r.state.showCountDown){var e=r.props.form.getFieldsValue();if(!e.mobile||""==e.mobile)return void d.default.info("请先输入手机号！");E.verifyCode({mobile:e.mobile}).then(function(e){if(0==e.result)return void d.default.fail(e.msg);r.code=e.data.verifyCode,r.setState({showCountDown:!0,countDown:60}),r.countDown()})}},u=o,a(r,u)}return u(t,e),b(t,[{key:"render",value:function(){var e=this.props.form,t=e.getFieldProps;e.getFieldError;return v.default.createElement("form",{className:"wx-reg"},v.default.createElement(m.default,null,v.default.createElement(c.default,w({},t("mobile"),{clear:!0,placeholder:"请输入手机号"})),v.default.createElement(c.default,w({},t("code"),{clear:!0,onExtraClick:this.getCode,placeholder:"请输入验证码",extra:this.state.showCountDown?this.state.countDown+"秒后重新获取":"获取验证码"})),v.default.createElement(c.default,w({},t("password"),{placeholder:"请输入密码",type:"password"})),v.default.createElement(c.default,w({},t("password2"),{placeholder:"请确认密码",type:"password"})),v.default.createElement(O,null,v.default.createElement(i.default,{type:"primary",onClick:this.onSubmit},"注册"))))}}]),t}(h.Component);t.default=(0,y.createForm)()(j),e.exports=t.default},758:function(e,t){}},[622]);